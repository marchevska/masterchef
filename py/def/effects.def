
Effects {
    Particles(Particles.OutroCharacterStars) {
        klass = "star30"
        layer = "57"
        sublayer = "-3"
        cycled = "yes"
        count = "100"
        quant = "5" period = "165"
        source = "0, -370"
        angle = "-math.pi, math.pi"
        transparency = "100, 120"
        frno = "0, 8"
        speed = "100, 120"
        direction = "math.pi - 0.17, math.pi + 0.17"
        area = "0, 0"
        scale = "-20, 20"
        angleinc = "-1, 1"
        transparencyinc = "-18, -22"
        scaleinc = "12, 20"
        program = "default"
    }
    
    //removing a group of tokens with an illusion of gravity
    Particles(Particles.RemoveGroupWithGravity) {
        program = "
            mov   em0,x           
            rot   (0;1),em2.0,a0      
            mul   a0,em1.0,v         
            rnd   -0.1,0.1,a
            rot   v,a,v
            indep
            updateonly
            mul   em3,dt,a0   
            add   a0,v,v
            mul   v,dt,a0 
            add   x,a0,x  
        "
    }
        
    Particles(Particles.RemoveTokenProgram) {
        program = "
            mov   em0,x
            rnd   em4.0,em4.1,v.1 
            neg   v.1,v.1
            rnd   -0.1,0.1,a
            rot   v,a,v
            indep
            updateonly 
            mul   em4,dt,a0   
            add   a0,v,v
            mul   v,dt,a0
            add   x,a0,x 
        "
    }
    
//---------------------------------------------------------------------
// Score changes
//---------------------------------------------------------------------
    
    Popup(Popup.Game.AddScore) {
        sprite = "domcasual-20-green"
        time = "1500"
        Transparency { type = "fadeaway" a0 = "50" a1 = "-25" }
        Motion { type = "bubble" a0 = "16" a1 = "-100" }
    }

    Popup(Popup.Game.SubtractScore) {
        sprite = "domcasual-20-red"
        time = "1500"
        Transparency { type = "blink" a = "400" t0 = "400" b = "-50" }
        Scale { type = "blink" a = "-100" t0 = "400" b = "150" c = "100" }
    }
    
    Popup(Popup.Game.TakeMoney) {
        sprite = "domcasual-20-orange"
        time = "1500"
        Transparency { type = "fadeaway" a0 = "50" a1 = "-25" }
        Motion { type = "bubble" a0 = "16" a1 = "-100" }
    }

    Popup(Popup.Game.LoseMoney) {
        sprite = "domcasual-20-red"
        time = "1500"
        Transparency { type = "fadeaway" a0 = "50" a1 = "-25" }
        Motion { type = "bubble" a0 = "16" a1 = "-100" }
    }

//---------------------------------------------------------------------
// Game popping messages
//---------------------------------------------------------------------
    
    Popup(Popup.Game.Commend) {
        sprite = "domcasual-20-yellow"
        time = "1500"
        Transparency { type = "blink" a = "400" t0 = "400" b = "-50" }
        Scale { type = "bounce" points = "[(0, 50), (300, 100), (800, 110), (1200, 140), (1500, 200)]" }
    }

    Popup(Popup.Game.GoalReached) {
        sprite = "domcasual-30-yellow"
        time = "2000"
        Transparency { type = "bounce" points = "[(0, 30), (300, 0), (1500, 0), (2000, 100)]" }
        Scale { type = "bounce" points = "[(0, 50), (300, 100), (1500, 120), (2000, 150)]" }
    }

//---------------------------------------------------------------------
// Effect: newly unlocked recipe in Cookbook
//---------------------------------------------------------------------

    Trail(Trail.CookbookNewRecipe) {
        sprite = "star"
        count = "20"
        delay = "20"
        time = "5000"
        Transparency {
            type = "bounce"
            points = "[(0, 100), (995, 100), (1000, 0), (2800, 0), (3200, 100)]"
        }
        Motion {
            type = "contour"
            speed = "250"
            t0 = "1000"
            contour = "(
                (12, 47), (-12, 47), (-39, 51), (-61, 62), (-58, 46), (-61, 37), (-49, 28),
                (-35, 25), (-45, 12), (-49, -8), (-45, -26), (-35, -43), (-19, -55), (-6, -58),
                (6, -58), (19, -55), (35, -43), (45, -26), (49, -8), (45, 12), (35, 25),
                (49, 28), (61, 37), (58, 46), (61, 62), (39, 51), (12, 47), (-12, 47), 
                )"
        }
        TrailTransp { type = "func" func = "4*i" var = "i" }
        TrailScale { type = "func" func = "100-3*i" var = "i" }
    }

//---------------------------------------------------------------------
// Effect: order complete
//---------------------------------------------------------------------
    
    Trail(Trail.OrderComplete) {
        sprite = "star"
        count = "10"
        delay = "20"
        time = "1200"
        Motion {
            type = "contour"
            speed = "250"
            contour = "(
                (-31, -33), (31, -33), (31, 21), (-31, 21), (-31, -33), (-10, -33) 
                )"
        }
        TrailTransp { type = "func" func = "6*i" var = "i" }
        TrailScale { type = "func" func = "100-5*i" var = "i" }
    }

}
